# General settings
backend                 = "glx";
vsync                   = true;
refresh-rate            = 240;  # auto-detect
mark-wmwin-focused      = true;
mark-ovredir-focused    = true;
use-ewmh-active-win     = true;
detect-transient        = true;
detect-client-leader    = true;
use-damage              = false;

# Rounded borders (radius in pixels)
round-borders			= 1;
corner-radius           = 12;

# No shadows on certain window types
dropdown_menu           = { shadow = false; };
popup_menu              = { shadow = false; };
utility                 = { shadow = false; };

shadow                  = true;
shadow-radius           = 12;
shadow-opacity          = 0.5;
shadow-offset-x         = -5;
shadow-offset-y         = -5;

shadow-exclude = [
  "class_g = 'RimWorldLinux'",
  "class_g = 'org.mozilla.firefox'",
  "class_g = 'firefox' && argb",
  "class_g = 'Polybar'",
  "window_type = 'popup_menu'",
  "window_type = 'dropdown_menu'",
  "window_type = 'tooltip'",
  "window_type = 'utility'",
  "window_type = 'dock'",
  "_NET_WM_WINDOW_TYPE@:32a = '_NET_WM_WINDOW_TYPE_POPUP'",
  "_NET_WM_WINDOW_TYPE:d = '_NET_WM_WINDOW_TYPE_DOCK'",
];

# Exclude from background blur
blur-background-exclude = [
  "class_g = 'RimWorldLinux'",
  "class_g = 'org.mozilla.firefox'",
  "class_g ?= 'firefox' && argb",
  "window_type = 'popup_menu'",
  "window_type = 'dropdown_menu'",
  "window_type = 'tooltip'",
  "window_type = 'utility'",
  "window_type = 'dock'",
  "_GTK_FRAME_EXTENTS@:c",
  "_NET_WM_WINDOW_TYPE@:32a = '_NET_WM_WINDOW_TYPE_POPUP'",
  "_NET_WM_WINDOW_TYPE:d = '_NET_WM_WINDOW_TYPE_DOCK'",
];

# Exclude from rounded corners (ibhagwanâ€™s fork)
rounded-corners-exclude = [
  "window_type = 'popup_menu'",
  "window_type = 'dropdown_menu'",
  "window_type = 'tooltip'",
  "window_type = 'utility'",
  "window_type = 'dock'",
  "class_g  = 'Polybar'",
  "class_i  = 'polybar'",
  "_NET_WM_WINDOW_TYPE@:32a = '_NET_WM_WINDOW_TYPE_POPUP'",
  "_NET_WM_WINDOW_TYPE:d = '_NET_WM_WINDOW_TYPE_DOCK'",
];

# Opacity rules for hidden/minimized windows
opacity-rule = [
  "95:class_g = 'URxvt' && !_NET_WM_STATE@:32a",
  "0:_NET_WM_STATE@[0]:32a *= '_NET_WM_STATE_HIDDEN'",
  "0:_NET_WM_STATE@[1]:32a *= '_NET_WM_STATE_HIDDEN'",
  "0:_NET_WM_STATE@[2]:32a *= '_NET_WM_STATE_HIDDEN'",
  "0:_NET_WM_STATE@[3]:32a *= '_NET_WM_STATE_HIDDEN'",
  "0:_NET_WM_STATE@[4]:32a *= '_NET_WM_STATE_HIDDEN'",
];

# Per-window rules
rules = (
  { match = "fullscreen"; corner-radius = 0; },
);

# Blur settings (Gaussian)
blur: {
    method            = "gaussian";
    size              = 10;
    deviation         = 5.0;
    background        = true;
    background-frame  = false;
    background-fixed  = false;
};

# Fade in/out windows
fading       = true;
fade-in-step = 0.04;
fade-out-step= 0.04;
fade-delta   = 10;

# Animation presets (remove boolean override!)
animations = (
  {
    triggers = [ "close", "hide" ];
    preset   = "fly-out";
    direction= "down";
  },
  {
    triggers = [ "open", "show" ];
    preset   = "slide-in";
    direction= "down";
  }
);
